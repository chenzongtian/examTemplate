{"version":3,"sources":["webpack:///./src/pages/mba/rules.js","webpack:///src/pages/mba/edit.vue","webpack:///./src/pages/mba/edit.vue?0d36","webpack:///./src/pages/mba/edit.vue"],"names":["rules","imgs","required","validator","rule","value","callback","Error","trigger","teamName","message","min","max","teamTitle","descr","edit","data","id","this","$route","query","form","activityId","btnLoad","created","document","title","methods","cancel","getMbaDetail","$refs","editForm","resetFields","onSubmit","_this","validate","valid","dataAjax","teamImg","Object","service","then","res","status","$message","type","duration","onClose","$router","go","self","error","msg","console","log","r","info","f","key","length","push","getUploadData","params","concat","uploadImg","_ref","_form$imgs","urls","index","splice","apply","toConsumableArray_default","split","delImg","_ref2","changeDetail","val","mounted","mba_edit","render","_vm","_h","$createElement","_c","_self","staticClass","_v","ref","attrs","model","label-width","label","prop","_l","item","fileUrl","replaceIndex","limit","multiple","fileUrlArr","width","height","on","uploadSuccess","delFile","maxlength","placeholder","$$v","$set","expression","detail","click","$event","loading","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/5.e2755298d3ce563c8afb.js","sourcesContent":["let checkImgList = (rule, value, callback) => {\r\n  if (!value[0]) {\r\n    callback(new Error('请上传活动图片'))\r\n  } else {\r\n    callback()\r\n  }\r\n}\r\nlet checkDesc = (rule, value, callback) => {\r\n  if (!value) {\r\n    callback(new Error('请填写方案详情'))\r\n  } else {\r\n    callback()\r\n  }\r\n}\r\nexport default {\r\n  imgs: [\r\n    { required: true, validator: checkImgList, trigger: 'blur' }\r\n  ],\r\n  teamName: [\r\n    { required: true, message: '请输入队伍名称', trigger: 'blur' },\r\n    { min: 0, max: 10, message: '长度在 0 到 10 个字符', trigger: 'blur' }\r\n  ],\r\n  teamTitle: [\r\n    { required: true, message: '请输入方案名称', trigger: 'blur' },\r\n    { min: 0, max: 10, message: '长度在 0 到 10 个字符', trigger: 'blur' }\r\n  ],\r\n  descr: [\r\n    { required: true, validator: checkDesc, trigger: 'blur' }\r\n  ]\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/mba/rules.js","<template>\r\n  <div class=\"project-edit-wrap\">\r\n    <div class=\"title\" v-if=\"id\">编辑项目</div>\r\n    <div class=\"title\" v-else>添加项目</div>\r\n    <div class=\"content\">\r\n      <el-form :model=\"form\" :rules=\"rules\" ref=\"editForm\" label-width=\"100px\" class=\"demo-ruleForm\">\r\n        <el-form-item label=\"项目图片：\" prop=\"imgs\">\r\n        <div class=\"upload-item\">\r\n          <upload-file\r\n           class=\"img-item\"\r\n           v-for=\"(item, index) in getUploadData('imgs')\"\r\n           :key=\"index\"\r\n           :fileUrl=\"item\"\r\n           :replaceIndex=\"index\"\r\n           :limit=\"1\"\r\n           :multiple=\"true\"\r\n           :fileUrlArr=\"form.imgs\"\r\n           :width=\"750/6\"\r\n           :height=\"413/6\"\r\n           @uploadSuccess=\"uploadImg\"\r\n           @delFile=\"delImg\">\r\n          </upload-file>\r\n        </div>\r\n        <p class=\"img-info\">只能上传jpg/png格式文件，建议大小：750px*413px</p>\r\n      </el-form-item>\r\n        <el-form-item label=\"队伍名称：\" prop=\"teamName\">\r\n          <el-input :maxlength=\"100\" v-model=\"form.teamName\" placeholder=\"请输入队伍名称\" class=\"form-item\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"方案名称：\" prop=\"teamTitle\">\r\n          <el-input :maxlength=\"100\" v-model=\"form.teamTitle\" placeholder=\"请输入方案名称\" class=\"form-item\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"方案详情：\" prop=\"descr\">\r\n          <q-editor\r\n            :detail=\"form.descr\"\r\n            @changeDetail=\"changeDetail\"\r\n            placeholder=\"请填写方案介绍&详情，可图文并茂\">\r\n          </q-editor>\r\n        </el-form-item>\r\n      </el-form>\r\n      <div class=\"submit-btn\">\r\n        <el-button @click=\"cancel()\">取消</el-button>\r\n        <el-button type=\"primary\" :loading=\"btnLoad\" @click=\"onSubmit()\">提交</el-button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport rules from './rules'\r\nimport { addMbaTeam, getMbaDetail } from '@/service'\r\n\r\nexport default {\r\n  data () {\r\n    return {\r\n      id: this.$route.query.id,\r\n      rules: rules,\r\n      form: {\r\n        id: this.id ? this.id : '',\r\n        imgs: [], // 项目图片\r\n        teamName: '', // 队伍名称\r\n        teamTitle: '', // 方案名称\r\n        descr: '', // 描述\r\n        activityId: 1031\r\n      },\r\n      btnLoad: false\r\n    }\r\n  },\r\n  created () {\r\n    document.title = this.id ? '编辑项目' : '添加项目'\r\n  },\r\n  methods: {\r\n    /**\r\n     * @description [取消操作]\r\n     */\r\n    cancel () {\r\n      if (this.id) {\r\n        this.getMbaDetail()\r\n      } else {\r\n        this.form.descr = ''\r\n        this.$refs.editForm.resetFields()\r\n      }\r\n    },\r\n    /**\r\n     * @description [提交数据]\r\n     */\r\n    onSubmit () {\r\n      this.$refs.editForm.validate((valid) => {\r\n        if (valid) {\r\n          let dataAjax = this.form\r\n          dataAjax.teamImg = this.form.imgs[0]\r\n          addMbaTeam(dataAjax).then((res) => {\r\n            if (res.status === 'true') {\r\n              this.$message({\r\n                type: 'success',\r\n                duration: 2000,\r\n                message: '提交成功！正在为您跳转...',\r\n                onClose: () => this.$router.go(-1)\r\n              })\r\n              // this.$router.push({path: '/mba'})\r\n            } else {\r\n              self.$message.error(res.msg)\r\n            }\r\n          })\r\n        } else {\r\n          return false\r\n        }\r\n      })\r\n    },\r\n    /**\r\n     * @description [获取该项目详情]\r\n     */\r\n    getMbaDetail () {\r\n      let self = this\r\n      getMbaDetail({id: self.id}).then(res => {\r\n        if (res.status === 'true') {\r\n          console.log(res)\r\n          let r = res.info\r\n          let f = self.form\r\n          for (let key in f) {\r\n            if (key === 'imgs') {\r\n              if (!f.imgs.length) {\r\n                f.imgs.push(r.teamImg)\r\n              }\r\n            } else {\r\n              f[key] = r[key]\r\n            }\r\n          }\r\n        } else {\r\n          self.$message.error(res.msg)\r\n        }\r\n      })\r\n    },\r\n    getUploadData (params) {\r\n      return this.form[params].length < 1\r\n        ? this.form[params].concat([''])\r\n        : this.form[params]\r\n    },\r\n    uploadImg ({urls, index}) {\r\n      this.form.imgs.splice(index, 1, ...urls.split(','))\r\n    },\r\n    delImg ({index}) {\r\n      this.form.imgs.splice(index, 1)\r\n    },\r\n    changeDetail (val) {\r\n      this.form.descr = val\r\n    }\r\n  },\r\n  mounted () {\r\n    if (this.id) {\r\n      this.getMbaDetail()\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n  .project-edit-wrap{\r\n    margin: 40px;\r\n    padding: 20px 20px 70px;\r\n    border: 1px solid #e6ebf5;\r\n    .title{\r\n      font-size: 16px;\r\n      font-weight: bold;\r\n      padding: 20px;\r\n    }\r\n    .content{\r\n      padding: 10px 80px;\r\n      .form-item{\r\n        width: 300px;\r\n      }\r\n      .submit-btn{\r\n        margin-left: 120px;\r\n        margin-top: 50px;\r\n      }\r\n    }\r\n  }\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/pages/mba/edit.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"project-edit-wrap\"},[(_vm.id)?_c('div',{staticClass:\"title\"},[_vm._v(\"编辑项目\")]):_c('div',{staticClass:\"title\"},[_vm._v(\"添加项目\")]),_vm._v(\" \"),_c('div',{staticClass:\"content\"},[_c('el-form',{ref:\"editForm\",staticClass:\"demo-ruleForm\",attrs:{\"model\":_vm.form,\"rules\":_vm.rules,\"label-width\":\"100px\"}},[_c('el-form-item',{attrs:{\"label\":\"项目图片：\",\"prop\":\"imgs\"}},[_c('div',{staticClass:\"upload-item\"},_vm._l((_vm.getUploadData('imgs')),function(item,index){return _c('upload-file',{key:index,staticClass:\"img-item\",attrs:{\"fileUrl\":item,\"replaceIndex\":index,\"limit\":1,\"multiple\":true,\"fileUrlArr\":_vm.form.imgs,\"width\":750/6,\"height\":413/6},on:{\"uploadSuccess\":_vm.uploadImg,\"delFile\":_vm.delImg}})})),_vm._v(\" \"),_c('p',{staticClass:\"img-info\"},[_vm._v(\"只能上传jpg/png格式文件，建议大小：750px*413px\")])]),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"队伍名称：\",\"prop\":\"teamName\"}},[_c('el-input',{staticClass:\"form-item\",attrs:{\"maxlength\":100,\"placeholder\":\"请输入队伍名称\"},model:{value:(_vm.form.teamName),callback:function ($$v) {_vm.$set(_vm.form, \"teamName\", $$v)},expression:\"form.teamName\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"方案名称：\",\"prop\":\"teamTitle\"}},[_c('el-input',{staticClass:\"form-item\",attrs:{\"maxlength\":100,\"placeholder\":\"请输入方案名称\"},model:{value:(_vm.form.teamTitle),callback:function ($$v) {_vm.$set(_vm.form, \"teamTitle\", $$v)},expression:\"form.teamTitle\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"方案详情：\",\"prop\":\"descr\"}},[_c('q-editor',{attrs:{\"detail\":_vm.form.descr,\"placeholder\":\"请填写方案介绍&详情，可图文并茂\"},on:{\"changeDetail\":_vm.changeDetail}})],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"submit-btn\"},[_c('el-button',{on:{\"click\":function($event){_vm.cancel()}}},[_vm._v(\"取消\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\",\"loading\":_vm.btnLoad},on:{\"click\":function($event){_vm.onSubmit()}}},[_vm._v(\"提交\")])],1)],1)])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-493f0264\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/mba/edit.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-493f0264\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./edit.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./edit.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./edit.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-493f0264\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./edit.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-493f0264\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/mba/edit.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}